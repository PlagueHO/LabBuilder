<?xml version="1.0" encoding="utf-8"?>

<labbuilderconfig name="PesterTestConfig"
                  version="1.0">
  <description>Configuration File Used with Pester Tests</description>

  <settings domainname="PESTER.LOCAL"
            email="tester@pester.local"
            vmpath="C:\Pester Lab"
            vhdparentpath="C:\Pester Lab\Virtual Hard Disk Templates"
            macaddressminimum="001122334400"
            macaddressmaximum="0011223344FF" 
            dsclibrarypath="DSCLibrary" />

  <resources>
    <module name="xNetworking" url="https://github.com/PlagueHO/xNetworking/archive/dev.zip" folder="xNetworking-dev" />
    <module name="xActiveDirectory" />
    <module name="xExchange" minimumversion="1.3.0.0" />
    <module name="xDNSServer" requiredversion="1.2.0.0" />
  </resources>

  <switches>
    <switch name="Pester Test External" type="External" >
      <adapters>
        <adapter name="Cluster" macaddress="00155D010701" vlan="5"/>
        <adapter name="Management" macaddress="00155D010702" vlan="6"/>
        <adapter name="SMB" macaddress="00155D010703" />
        <adapter name="LM" macaddress="00155D010704" />
      </adapters>
    </switch>
    <switch name="Pester Test Private Vlan" type="Private" vlan="2" />
    <switch name="Pester Test Private" type="Private" />
    <switch name="Pester Test Internal Vlan" type="Internal" vlan="3" />
    <switch name="Pester Test Internal" type="Internal" />
  </switches>

  <templatevhds isopath="ISOFiles" 
                vhdpath="VHDFiles" 
                prefix="Template " >
    <templatevhd name="Windows Server 2012 R2 Datacenter Full"
                 iso="9600.16384.130821-1623_x64fre_Server_EN-US_IRM_SSS_DV5.iso"
                 url="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2012-r2"
                 vhd="Windows Server 2012 R2 Datacenter Full.vhdx" 
                 wimimage="Windows Server 2012 R2 SERVERDATACENTER" 
                 ostype="Server"
                 vhdformat="vhdx" 
                 vhdtype="dynamic" 
                 generation="2" />
    <templatevhd name="Windows Server 2012 R2 Datacenter Core"
                 iso="9600.16384.130821-1623_x64fre_Server_EN-US_IRM_SSS_DV5.iso"
                 url="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2012-r2"
                 vhd="Windows Server 2012 R2 Datacenter Core.vhdx"
                 wimimage="Windows Server 2012 R2 SERVERDATACENTERCORE"
                 ostype="Server"
                 vhdformat="vhdx" 
                 vhdtype="dynamic" 
                 generation="2" />                 
    <templatevhd name="Windows Server 2016 TP4 Datacenter FULL"
                 iso="10586.0.151029-1700.TH2_RELEASE_SERVER_OEMRET_X64FRE_EN-US.ISO"
                 url="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-technical-preview"
                 vhd="Windows Server 2016 TP4 Datacenter Full.vhdx"
                 wimimage="Windows Server 2016 Technical Preview 4 SERVERDATACENTER"
                 ostype="Server"
                 vhdformat="vhdx" 
                 vhdtype="dynamic" 
                 generation="2" />                 
    <templatevhd name="Windows Server 2016 TP4 Datacenter CORE"
                 iso="10586.0.151029-1700.TH2_RELEASE_SERVER_OEMRET_X64FRE_EN-US.ISO"
                 url="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-technical-preview"
                 vhd="Windows Server 2016 TP4 Datacenter Core.vhdx"
                 wimimage="Windows Server 2016 Technical Preview 4 SERVERDATACENTERCORE"
                 ostype="Server"
                 vhdformat="vhdx" 
                 vhdtype="dynamic" 
                 generation="2" />                 
    <templatevhd name="Windows 10 Enterprise"
                 iso="10586.0.151029-1700.TH2_RELEASE_CLIENTENTERPRISEEVAL_OEMRET_X64FRE_EN-US.ISO"
                 url="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-10-enterprise"
                 vhd="Windows 10 Enterprise.vhdx"
                 wimimage="Windows 10 Enterprise"
                 ostype="Client"
                 vhdformat="vhdx" 
                 vhdtype="dynamic" 
                 generation="2" />                 
    <templatevhd name="Nano Server 2016 TP4 Basic"
                 iso="10586.0.151029-1700.TH2_RELEASE_SERVER_OEMRET_X64FRE_EN-US.ISO"
                 url="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-technical-preview"
                 vhd="Nano Server 2016 TP4 Basic.vhdx"
                 wimimage="" 
                 ostype="Nano"
                 packages="Guest"
                 vhdformat="vhdx" 
                 vhdtype="dynamic" 
                 generation="2" />                 
  </templatevhds>
  
  <templates fromvm="Pester *" >
    <template name="Pester Windows Server 2012 R2 Datacenter Full"
              vhd="Windows Server 2012 R2 Datacenter Full.vhdx"
              sourcevhd="VhdFiles\Windows Server 2012 R2 Datacenter Full.vhdx"
              edition="Windows Server 2012 R2 SERVERDATACENTER"
              allowcreate="Y"
              memorystartupbytes="1GB"
              dynamicmemoryenabled="Y"
              processorcount="1"
              administratorpassword="None"
              productkey="AAAAA-AAAAA-AAAAA-AAAAA-AAAAA"
              timezone="Pacific Standard Time"
              ostype="Server" 
              integrationservices="Guest Service Interface,Heartbeat,Key-Value Pair Exchange,Shutdown,Time Synchronization,VSS" />
    <template name="Pester Windows Server 2012 R2 Datacenter Core"
              vhd="Windows Server 2012 R2 Datacenter Core.vhdx"
              sourcevhd="VhdFiles\Windows Server 2012 R2 Datacenter Full.vhdx"
              edition="Windows Server 2012 R2 SERVERDATACENTERCORE"
              allowcreate="Y"
              memorystartupbytes="1GB"
              dynamicmemoryenabled="N"
              processorcount="1"
              exposevirtualizationextensions="Y"
              administratorpassword="None"
              productkey="BBBBB-BBBBB-BBBBB-BBBBB-BBBBB"
              timezone="Pacific Standard Time"
              ostype="Server" 
              integrationservices="Guest Service Interface,Heartbeat,Key-Value Pair Exchange,Shutdown,Time Synchronization,VSS" />
    <template name="Pester Windows 10 Enterprise"
              vhd="Windows 10 Enterprise.vhdx"
              sourcevhd="VhdFiles\Windows 10 Enterprise.vhdx"
              edition="Windows 10 Enterprise"
              allowcreate="Y"
              memorystartupbytes="2GB"
              processorcount="1"
              administratorpassword="None"
              productkey="CCCCC-CCCCC-CCCCC-CCCCC-CCCCC"
              timezone="Pacific Standard Time"
              ostype="Client" 
              integrationservices="Guest Service Interface,Heartbeat,Key-Value Pair Exchange,Shutdown,Time Synchronization,VSS" />
  </templates>

  <vms>
    <vm name="PESTER01"
        template="Pester Windows Server 2012 R2 Datacenter Full"
        computername="PESTER01"
        memorystartupbytes="2GB"
        dynamicmemoryenabled="N"
        exposevirtualizationextensions="Y"
        usedifferencingbootdisk="Y"
        administratorpassword="Something"
        productkey="DDDDD-DDDDD-DDDDD-DDDDD-DDDDD"
        timezone="Pacific Standard Time"
        unattendfile=""
        setupcomplete="" 
        integrationservices="Guest Service Interface,Heartbeat,Key-Value Pair Exchange,Shutdown,Time Synchronization,VSS" >
      <datavhds>
        <datavhd vhd="DataDiskCopy.vhdx" sourcevhd="VhdFiles\DataDisk.vhdx" />
        <datavhd vhd="DataDiskFixed.vhdx" type="fixed" size="10GB" supportpr="N"/>
        <datavhd vhd="DataDiskDynamic.vhdx" type="dynamic" size="10GB" />
        <datavhd vhd="DataDiskDifferencing.vhdx" type="differencing" size="10GB" parentvhd="VhdFiles\DataDisk.vhdx" />
        <datavhd vhd="DataDiskMove.vhdx" sourcevhd="VhdFiles\DataDisk.vhdx" movesourcevhd="Y" />
        <datavhd vhd="DataDiskShared.vhdx" type="fixed" size="10GB" shared="Y" supportsr="Y" />
      </datavhds>
      <adapters>
        <adapter name="Pester Test Private Vlan" switchname="Pester Test Private Vlan" macaddress="00155D010801" >
          <ipv4 address="192.168.16.1"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.16.1"/>
          <ipv6 address="fd53:ccc5:895a:0000::1"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:0000::1"/>
        </adapter>
        <adapter name="Pester Test Internal Vlan" switchname="Pester Test Internal Vlan" macaddress="00155D010802" >
          <ipv4 address="192.168.16.2"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.16.2"/>
          <ipv6 address="fd53:ccc5:895a:0000::2"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:0000::2"/>
        </adapter>
        <adapter name="Pester Test Private" switchname="Pester Test Private" macaddress="00155D010803" vlan="3" >
          <ipv4 address="192.168.16.3"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.16.3"/>
          <ipv6 address="fd53:ccc5:895a:0000::3"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:0000::3"/>
        </adapter>
        <adapter name="Pester Test Internal" switchname="Pester Test Internal" macaddress="00155D010804" vlan="4" >
          <ipv4 address="192.168.16.4"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.16.4"/>
          <ipv6 address="fd53:ccc5:895a:0000::4"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:0000::4"/>
        </adapter>
      </adapters>
      <dsc configname="STANDALONE_DEFAULT"
           configfile="PesterTest.DSC.ps1">
        <parameters>
          Dummy = "Dummy"
        </parameters>
      </dsc>
      <install>
        <msu url="http://download.microsoft.com/download/1/D/8/1D8B5022-5477-4B9A-8104-6A71FF9D98AB/WindowsTH-KB2693643-x64.msu" />
      </install>
    </vm>
  </vms>
  
</labbuilderconfig>